{
  "version": 3,
  "file": "bundle.css",
  "sources": [
    "..\\..\\App.svelte"
  ],
  "sourcesContent": [
    "<script>\n\timport AppDataFacade from './AppDataFacade.js'\n\timport EntriesByDate from './EntriesByDate.svelte'\n\timport SelectableIcon from './SelectableIcon.svelte'\n\tlet data = new AppDataFacade();\n\tfunction adaptSelectable(i) {\n\t\treturn Object.assign({}, i, {checked: false})\n\t}\n\n\tlet defaultSelectables;\n\texport let selectables = [];\n\texport let note = \"\";\n\texport let latestEntriesByDate = [];\n\n\tasync function init() {\n\t\t// copy the source data version, slap on a \"checked attribute\" for the view\n\t\t// keep those clean and make a copy for working data\n\t\tdefaultSelectables = (await data.getSelectables()).map(adaptSelectable);\n\t\t\n\t\tselectables = defaultSelectables.map(adaptSelectable)\n\t\tlet latestAsObj = await data.getLatestEntriesByDate();\n\t\tlet latestArray = [];\n\t\t// transform the object into an array, then maybe sort it?\n\t\tfor (let key in latestAsObj) {\n\t\t\tlatestArray.push(latestAsObj[key]);\n\t\t}\n\t\tlatestEntriesByDate = latestArray;\n\t\tconsole.log(\"init.latestEntriesByDate\", latestEntriesByDate)\n\t}\n\t\n\texport async function resetForm() {\n\t\tnote = \"\";\n\t\t// todo: this doesn't seem to be resetting the checked status in the form...\n\t\tselectables = defaultSelectables.map(Object.assign)\n\t}\n\n\texport async function handleSave(event) {\n\t\tevent.preventDefault();\n\t\tevent.stopImmediatePropagation();\n\n\t\tvar newEntry = {};\n\t\tnewEntry.id = new Date(); // todo make this a real id?\n\t\tnewEntry.selectables = selectables.filter(i=>i.checked).map(i=>{i.key});\n\t\tnewEntry.note = note;\n\t\t// todo put this in the form?\n\t\tnewEntry.when = new Date();\n\n\t\tdata.addEntry(newEntry);\n\t\tonEntryAdded(newEntry);\n\t\tresetForm();\n\t}\n\n\tasync function onEntryAdded(entry) {\n\t\tawait init();\n\t}\n\n\tinit();\n</script>\n\n<main>\n    <section id=\"log-form\">\n\t\t<form name=\"updog\" method=\"post\">\n\t\t\t<div class=\"selectables\">\n\t\t\t\t{#each selectables as item (item.key)}\n\t\t\t\t<label class=\"selectable-target\">\n\t\t\t\t\t<input type=\"checkbox\" name={item.key} id={item.key} bind:checked={item.checked} />\n\t\t\t\t\t<SelectableIcon selectable={item}/>\n\t\t\t\t</label>\n\t\t\t\t{/each}\n\t\t\t</div>\t\t\t\n\n\t\t\t<label class=\"note\">\n\t\t\t\tNote:\n\t\t\t\t<textarea id=\"note\" name=\"note\" bind:value={note}></textarea>\n\t\t\t</label>\n\t\t\t<div>\n\t\t\t\t<button type=\"button\" on:click={handleSave}>save</button>\n\t\t\t</div>\n\t\t</form>\n\t</section>\t\n\t<section id=\"history\">\n\t\t<ol>\n\t\t\t{#each latestEntriesByDate as group (group.id)}\n\t\t\t<li>\n\t\t\t\t<EntriesByDate entries={group.entries} date={group.date} selectableMap={defaultSelectables} />\n\t\t\t</li>\n\t\t\t{/each}\n\t\t</ol>\n\t</section>\n</main>\n\n<style>\n\tmain {\n\t\ttext-align: center;\n\t\tpadding: 1em;\n\t\tmax-width: 240px;\n\t\tmargin: 0 auto;\n\t}\n\n\th1 {\n\t\tcolor: #ff3e00;\n\t\ttext-transform: uppercase;\n\t\tfont-size: 4em;\n\t\tfont-weight: 100;\n\t}\n\n\t@media (min-width: 640px) {\n\t\tmain {\n\t\t\tmax-width: none;\n\t\t}\n\t}\n</style>"
  ],
  "names": [],
  "mappings": "AA4FC,IAAI,eAAC,CAAC,AACL,UAAU,CAAE,MAAM,CAClB,OAAO,CAAE,GAAG,CACZ,SAAS,CAAE,KAAK,CAChB,MAAM,CAAE,CAAC,CAAC,IAAI,AACf,CAAC,AASD,MAAM,AAAC,YAAY,KAAK,CAAC,AAAC,CAAC,AAC1B,IAAI,eAAC,CAAC,AACL,SAAS,CAAE,IAAI,AAChB,CAAC,AACF,CAAC"
}